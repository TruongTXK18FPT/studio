import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
  console.log('üå± B·∫Øt ƒë·∫ßu seed d·ªØ li·ªáu quiz...');

  // T·∫°o user h·ªá th·ªëng n·∫øu ch∆∞a c√≥
  const systemUser = await prisma.user.upsert({
    where: { email: 'system@hanhtrinhbacho.vn' },
    update: {},
    create: {
      email: 'system@hanhtrinhbacho.vn',
      name: 'H·ªá th·ªëng',
      passwordHash: 'system_user',
      role: 'ADMIN'
    }
  });

  console.log('‚úÖ ƒê√£ t·∫°o user h·ªá th·ªëng');

  // T·∫°o quiz m·∫´u v·ªÅ T∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh
  const quiz1 = await prisma.quiz.create({
    data: {
      title: 'T∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh - C∆° b·∫£n',
      description: 'Ki·ªÉm tra ki·∫øn th·ª©c c∆° b·∫£n v·ªÅ t∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh',
      difficulty: 'medium',
      category: 'T∆∞ t∆∞·ªüng',
      tags: ['H·ªì Ch√≠ Minh', 'T∆∞ t∆∞·ªüng', 'C√°ch m·∫°ng'],
      timeLimit: 30,
      isPublic: true,
      authorId: systemUser.id,
      questions: {
        create: [
          {
            question: 'T∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh ƒë∆∞·ª£c h√¨nh th√†nh tr√™n c∆° s·ªü n√†o?',
            type: 'single',
            difficulty: 'medium',
            explanation: 'T∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh ƒë∆∞·ª£c h√¨nh th√†nh tr√™n n·ªÅn t·∫£ng ch·ªß nghƒ©a M√°c - L√™nin, k·∫ø th·ª´a truy·ªÅn th·ªëng y√™u n∆∞·ªõc, nh√¢n nghƒ©a d√¢n t·ªôc v√† tinh hoa vƒÉn h√≥a nh√¢n lo·∫°i.',
            topic: 'C∆° s·ªü h√¨nh th√†nh',
            order: 0,
            choices: {
              create: [
                {
                  text: 'Ch·ªß nghƒ©a M√°c - L√™nin, truy·ªÅn th·ªëng d√¢n t·ªôc v√† tinh hoa vƒÉn h√≥a nh√¢n lo·∫°i',
                  isCorrect: true,
                  order: 0
                },
                {
                  text: 'T∆∞ t∆∞·ªüng ph∆∞∆°ng ƒê√¥ng',
                  isCorrect: false,
                  order: 1
                },
                {
                  text: 'T∆∞ t∆∞·ªüng ph∆∞∆°ng T√¢y',
                  isCorrect: false,
                  order: 2
                },
                {
                  text: 'Kinh nghi·ªám th·ª±c ti·ªÖn c√°ch m·∫°ng',
                  isCorrect: false,
                  order: 3
                }
              ]
            }
          },
          {
            question: 'Theo H·ªì Ch√≠ Minh, y·∫øu t·ªë quy·∫øt ƒë·ªãnh th·∫Øng l·ª£i c·ªßa c√°ch m·∫°ng gi·∫£i ph√≥ng d√¢n t·ªôc l√† g√¨?',
            type: 'single',
            difficulty: 'medium',
            explanation: 'Ng∆∞·ªùi nh·∫•n m·∫°nh: S·ª± l√£nh ƒë·∫°o c·ªßa ƒê·∫£ng C·ªông s·∫£n l√† nh√¢n t·ªë quy·∫øt ƒë·ªãnh th·∫Øng l·ª£i c·ªßa c√°ch m·∫°ng Vi·ªát Nam.',
            topic: 'C√°ch m·∫°ng gi·∫£i ph√≥ng d√¢n t·ªôc',
            order: 1,
            choices: {
              create: [
                {
                  text: 'S·ª± l√£nh ƒë·∫°o c·ªßa ƒê·∫£ng C·ªông s·∫£n',
                  isCorrect: true,
                  order: 0
                },
                {
                  text: 'S·ª©c m·∫°nh to√†n d√¢n t·ªôc',
                  isCorrect: false,
                  order: 1
                },
                {
                  text: 'ƒêo√†n k·∫øt qu·ªëc t·∫ø',
                  isCorrect: false,
                  order: 2
                },
                {
                  text: 'C√¥ng ‚Äì n√¥ng li√™n minh',
                  isCorrect: false,
                  order: 3
                }
              ]
            }
          },
          {
            question: 'Theo H·ªì Ch√≠ Minh, m·ª•c ti√™u cao nh·∫•t c·ªßa CNXH l√† g√¨?',
            type: 'single',
            difficulty: 'medium',
            explanation: 'CNXH theo H·ªì Ch√≠ Minh nh·∫±m n√¢ng cao ƒë·ªùi s·ªëng nh√¢n d√¢n v·ªÅ v·∫≠t ch·∫•t v√† tinh th·∫ßn, h∆∞·ªõng t·ªõi x√£ h·ªôi d√¢n ch·ªß, c√¥ng b·∫±ng, vƒÉn minh.',
            topic: 'Ch·ªß nghƒ©a x√£ h·ªôi',
            order: 2,
            choices: {
              create: [
                {
                  text: 'D√¢n gi√†u, n∆∞·ªõc m·∫°nh, d√¢n ch·ªß, c√¥ng b·∫±ng, vƒÉn minh',
                  isCorrect: true,
                  order: 0
                },
                {
                  text: 'Ph√°t tri·ªÉn c√¥ng nghi·ªáp',
                  isCorrect: false,
                  order: 1
                },
                {
                  text: 'X√≥a b·ªè t∆∞ h·ªØu',
                  isCorrect: false,
                  order: 2
                },
                {
                  text: 'T·∫≠p trung quy·ªÅn l·ª±c',
                  isCorrect: false,
                  order: 3
                }
              ]
            }
          }
        ]
      }
    }
  });

  console.log('‚úÖ ƒê√£ t·∫°o quiz: T∆∞ t∆∞·ªüng H·ªì Ch√≠ Minh - C∆° b·∫£n');

  // T·∫°o quiz m·∫´u v·ªÅ L·ªãch s·ª≠ Vi·ªát Nam
  const quiz2 = await prisma.quiz.create({
    data: {
      title: 'L·ªãch s·ª≠ Vi·ªát Nam - Th·ªùi k·ª≥ thu·ªôc ƒë·ªãa',
      description: 'Ki·ªÉm tra ki·∫øn th·ª©c v·ªÅ l·ªãch s·ª≠ Vi·ªát Nam trong th·ªùi k·ª≥ thu·ªôc ƒë·ªãa Ph√°p',
      difficulty: 'hard',
      category: 'L·ªãch s·ª≠',
      tags: ['L·ªãch s·ª≠', 'Thu·ªôc ƒë·ªãa', 'Ph√°p'],
      timeLimit: 45,
      isPublic: true,
      authorId: systemUser.id,
      questions: {
        create: [
          {
            question: 'Th·ª±c d√¢n Ph√°p x√¢m l∆∞·ª£c Vi·ªát Nam v√†o nƒÉm n√†o?',
            type: 'single',
            difficulty: 'easy',
            explanation: 'Th·ª±c d√¢n Ph√°p b·∫Øt ƒë·∫ßu x√¢m l∆∞·ª£c Vi·ªát Nam t·ª´ nƒÉm 1858 v·ªõi vi·ªác ƒë√°nh chi·∫øm ƒê√† N·∫µng.',
            topic: 'X√¢m l∆∞·ª£c',
            order: 0,
            choices: {
              create: [
                {
                  text: '1858',
                  isCorrect: true,
                  order: 0
                },
                {
                  text: '1862',
                  isCorrect: false,
                  order: 1
                },
                {
                  text: '1883',
                  isCorrect: false,
                  order: 2
                },
                {
                  text: '1884',
                  isCorrect: false,
                  order: 3
                }
              ]
            }
          },
          {
            question: 'Hi·ªáp ∆∞·ªõc n√†o ƒë√°nh d·∫•u vi·ªác Ph√°p ho√†n th√†nh vi·ªác x√¢m l∆∞·ª£c Vi·ªát Nam?',
            type: 'single',
            difficulty: 'medium',
            explanation: 'Hi·ªáp ∆∞·ªõc Paten√¥tre nƒÉm 1884 ƒë√°nh d·∫•u vi·ªác Ph√°p ho√†n th√†nh vi·ªác x√¢m l∆∞·ª£c v√† thi·∫øt l·∫≠p ch·∫ø ƒë·ªô b·∫£o h·ªô ·ªü Vi·ªát Nam.',
            topic: 'Hi·ªáp ∆∞·ªõc',
            order: 1,
            choices: {
              create: [
                {
                  text: 'Hi·ªáp ∆∞·ªõc Paten√¥tre (1884)',
                  isCorrect: true,
                  order: 0
                },
                {
                  text: 'Hi·ªáp ∆∞·ªõc Nh√¢m Tu·∫•t (1862)',
                  isCorrect: false,
                  order: 1
                },
                {
                  text: 'Hi·ªáp ∆∞·ªõc Gi√°p Tu·∫•t (1874)',
                  isCorrect: false,
                  order: 2
                },
                {
                  text: 'Hi·ªáp ∆∞·ªõc Qu√Ω M√πi (1883)',
                  isCorrect: false,
                  order: 3
                }
              ]
            }
          }
        ]
      }
    }
  });

  console.log('‚úÖ ƒê√£ t·∫°o quiz: L·ªãch s·ª≠ Vi·ªát Nam - Th·ªùi k·ª≥ thu·ªôc ƒë·ªãa');

  // T·∫°o quiz m·∫´u v·ªÅ VƒÉn h√≥a
  const quiz3 = await prisma.quiz.create({
    data: {
      title: 'VƒÉn h√≥a Vi·ªát Nam - Truy·ªÅn th·ªëng',
      description: 'Kh√°m ph√° nh·ªØng n√©t ƒë·∫πp vƒÉn h√≥a truy·ªÅn th·ªëng c·ªßa d√¢n t·ªôc Vi·ªát Nam',
      difficulty: 'easy',
      category: 'VƒÉn h√≥a',
      tags: ['VƒÉn h√≥a', 'Truy·ªÅn th·ªëng', 'D√¢n t·ªôc'],
      timeLimit: 20,
      isPublic: true,
      authorId: systemUser.id,
      questions: {
        create: [
          {
            question: 'T·∫øt Nguy√™n ƒê√°n l√† l·ªÖ h·ªôi quan tr·ªçng nh·∫•t trong nƒÉm c·ªßa ng∆∞·ªùi Vi·ªát Nam. ƒê√∫ng hay sai?',
            type: 'true_false',
            difficulty: 'easy',
            explanation: 'T·∫øt Nguy√™n ƒê√°n l√† l·ªÖ h·ªôi quan tr·ªçng nh·∫•t trong nƒÉm c·ªßa ng∆∞·ªùi Vi·ªát Nam, ƒë√°nh d·∫•u s·ª± kh·ªüi ƒë·∫ßu c·ªßa nƒÉm m·ªõi theo √¢m l·ªãch.',
            topic: 'L·ªÖ h·ªôi',
            order: 0,
            choices: {
              create: [
                {
                  text: 'ƒê√∫ng',
                  isCorrect: true,
                  order: 0
                },
                {
                  text: 'Sai',
                  isCorrect: false,
                  order: 1
                }
              ]
            }
          },
          {
            question: 'Nh·ªØng lo·∫°i h√¨nh ngh·ªá thu·∫≠t n√†o sau ƒë√¢y l√† truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam?',
            type: 'multiple',
            difficulty: 'medium',
            explanation: 'Ch√®o, Tu·ªìng, C·∫£i l∆∞∆°ng v√† Quan h·ªç ƒë·ªÅu l√† nh·ªØng lo·∫°i h√¨nh ngh·ªá thu·∫≠t truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam.',
            topic: 'Ngh·ªá thu·∫≠t',
            order: 1,
            choices: {
              create: [
                {
                  text: 'Ch√®o',
                  isCorrect: true,
                  order: 0
                },
                {
                  text: 'Tu·ªìng',
                  isCorrect: true,
                  order: 1
                },
                {
                  text: 'C·∫£i l∆∞∆°ng',
                  isCorrect: true,
                  order: 2
                },
                {
                  text: 'Quan h·ªç',
                  isCorrect: true,
                  order: 3
                },
                {
                  text: 'Opera',
                  isCorrect: false,
                  order: 4
                },
                {
                  text: 'Ballet',
                  isCorrect: false,
                  order: 5
                }
              ]
            }
          }
        ]
      }
    }
  });

  console.log('‚úÖ ƒê√£ t·∫°o quiz: VƒÉn h√≥a Vi·ªát Nam - Truy·ªÅn th·ªëng');

  console.log('üéâ Ho√†n th√†nh seed d·ªØ li·ªáu quiz!');
  console.log(`üìä ƒê√£ t·∫°o ${3} quiz v·ªõi t·ªïng c·ªông ${7} c√¢u h·ªèi`);
}

main()
  .catch((e) => {
    console.error('‚ùå L·ªói khi seed d·ªØ li·ªáu:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
